[En](./README_EN.md)/ä¸­æ–‡

# æ™ºæ…§æœç´¢ç³»ç»Ÿ (Smart Search System)

æ™ºæ…§æœç´¢ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº Ruby æ„å»ºçš„æ™ºèƒ½æœç´¢ä»£ç†ï¼Œåˆ©ç”¨å¤§è¯­è¨€æ¨¡å‹å’Œå¤šå·¥å…·é›†æˆæ¥æä¾›æ·±åº¦ç ”ç©¶èƒ½åŠ›ã€‚è¯¥ç³»ç»Ÿé€šè¿‡ä¸‰é˜¶æ®µæµç¨‹ï¼ˆé¢„æœç´¢ã€æ·±åº¦æœç´¢ã€ä¿¡æ¯æ±‡æ€»ï¼‰ç”Ÿæˆé«˜è´¨é‡çš„æœç´¢æŠ¥å‘Šã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **ä¸‰é˜¶æ®µæ™ºèƒ½æœç´¢æµç¨‹**ï¼šé¢„æœç´¢ â†’ æ·±åº¦æœç´¢ â†’ ä¿¡æ¯æ±‡æ€»
- **å¤šå·¥å…·é›†æˆ**ï¼šé›†æˆå¤šç§æœç´¢å’Œæ•°æ®è·å–å·¥å…·
- **å¤§è¯­è¨€æ¨¡å‹é©±åŠ¨**ï¼šåŸºäº DeepSeek ç­‰å…ˆè¿›æ¨¡å‹
- **å®æ—¶äº¤äº’å¼ç•Œé¢**ï¼šå‘½ä»¤è¡Œäº¤äº’ä½“éªŒ
- **è‡ªåŠ¨æŠ¥å‘Šç”Ÿæˆ**ï¼šæœç´¢å®Œæˆåè‡ªåŠ¨ç”Ÿæˆ Markdown æ ¼å¼æŠ¥å‘Š
- **MCP åè®®æ”¯æŒ**ï¼šé€šè¿‡ Model Context Protocol æ‰©å±•åŠŸèƒ½

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

- [`search.rb`](search.rb): ä¸»ç¨‹åºå…¥å£ï¼Œæä¾›äº¤äº’å¼å‘½ä»¤è¡Œç•Œé¢
- [`agents/smart_search.rb`](agents/smart_search.rb): æ™ºèƒ½æœç´¢ä»£ç†çš„æ ¸å¿ƒé€»è¾‘
- [`agents/workers/`](agents/workers/): å·¥ä½œè¿›ç¨‹å®šä¹‰
  - [`pre_search.rb`](agents/workers/pre_search.rb): é¢„æœç´¢é˜¶æ®µ
  - [`smart_search.rb`](agents/workers/smart_search.rb): æ·±åº¦æœç´¢é˜¶æ®µ
  - [`summary.rb`](agents/workers/summary.rb): ä¿¡æ¯æ±‡æ€»é˜¶æ®µ
- [`agents/mcps/all.rb`](agents/mcps/all.rb): MCP æœåŠ¡å™¨é…ç½®
- [`config/agent.yml`](config/agent.yml): ä»£ç†é…ç½®æ–‡ä»¶

### å·¥ä½œæµç¨‹

1. **é¢„æœç´¢é˜¶æ®µ**ï¼šåˆ†æç”¨æˆ·æŸ¥è¯¢ï¼Œåˆ¶å®šæœç´¢ç­–ç•¥
2. **æ·±åº¦æœç´¢é˜¶æ®µ**ï¼šæ‰§è¡Œå®é™…æœç´¢ï¼Œæ”¶é›†ç›¸å…³ä¿¡æ¯
3. **ä¿¡æ¯æ±‡æ€»é˜¶æ®µ**ï¼šæ•´åˆæœç´¢ç»“æœï¼Œç”Ÿæˆæœ€ç»ˆæŠ¥å‘Š

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Ruby 3.0+
- Bundler

### å®‰è£…æ­¥éª¤

1. å…‹éš†é¡¹ç›®
   ```bash
   git clone <repository-url>
   cd smart_search
   ```

2. å®‰è£…ä¾èµ–
   ```bash
   bundle install
   ```

3. è¿è¡Œç³»ç»Ÿ
   ```bash
   ruby search.rb
   ```

### ä½¿ç”¨æ–¹æ³•

å¯åŠ¨ç³»ç»Ÿåï¼Œæ‚¨å°†çœ‹åˆ°äº¤äº’å¼æç¤ºç¬¦ï¼š
```
æ¬¢è¿ä½¿ç”¨æ™ºæ…§æœç´¢
æ‚¨å¯ä»¥ç›´æ¥è¾“å…¥æé—®
æˆ–è¾“å…¥ 'exit' æ¥é€€å‡ºç¨‹åºã€‚
> 
```

ç›´æ¥è¾“å…¥æ‚¨çš„æœç´¢æŸ¥è¯¢ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ‰§è¡Œä¸‰é˜¶æ®µæœç´¢å¹¶ç”ŸæˆæŠ¥å‘Šã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Ruby
- **æ ¸å¿ƒæ¡†æ¶**: SmartAgent, SmartPrompt
- **HTTP å®¢æˆ·ç«¯**: å†…ç½® (é€šè¿‡ mcp-sdk.rb)
- **æ•°æ®å­˜å‚¨**: PostgreSQL (é€šè¿‡ Sequel ORM)
- **Web æœåŠ¡**: Sinatra + Puma

## ğŸ“Š é¡¹ç›®ç»“æ„

```
smart_search/
â”œâ”€â”€ search.rb                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ Gemfile                   # Ruby ä¾èµ–ç®¡ç†
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ agent.yml            # ä»£ç†é…ç½®
â”‚   â””â”€â”€ config.yml           # å¼•æ“é…ç½®
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ smart_search.rb      # æ™ºèƒ½æœç´¢ä»£ç†
â”‚   â”œâ”€â”€ workers/             # å·¥ä½œè¿›ç¨‹
â”‚   â”‚   â”œâ”€â”€ pre_search.rb
â”‚   â”‚   â”œâ”€â”€ smart_search.rb
â”‚   â”‚   â””â”€â”€ summary.rb
â”‚   â”œâ”€â”€ templates/           # æç¤ºæ¨¡æ¿
â”‚   â”œâ”€â”€ tools/               # å·¥å…·å®šä¹‰
â”‚   â””â”€â”€ mcps/                # MCP æœåŠ¡å™¨é…ç½®
â”œâ”€â”€ log/                     # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ reports/                 # ç”Ÿæˆçš„æŠ¥å‘Š
```

## ğŸ”§ é…ç½®è¯´æ˜

### ä»£ç†é…ç½® (config/agent.yml)

```yaml
logger_file: "./log/agent.log"      # æ—¥å¿—æ–‡ä»¶è·¯å¾„
engine_config: "./config/config.yml" # å¼•æ“é…ç½®æ–‡ä»¶
agent_path: "./agents"              # ä»£ç†ç›®å½•
tools_path: "./agents/tools"        # å·¥å…·ç›®å½•
mcp_path: "./agents/mcps"           # MCP ç›®å½•
```

### MCP é›†æˆ

ç³»ç»Ÿé€šè¿‡ MCP (Model Context Protocol) é›†æˆå¤–éƒ¨å·¥å…·å’ŒæœåŠ¡ï¼Œé…ç½®åœ¨ [`agents/mcps/all.rb`](agents/mcps/all.rb) ä¸­å®šä¹‰ã€‚

## ğŸ“ˆ æŠ¥å‘Šç”Ÿæˆ

æ¯æ¬¡æœç´¢å®Œæˆåï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ Markdown æ ¼å¼çš„æŠ¥å‘Šæ–‡ä»¶ï¼Œå‘½åæ ¼å¼ä¸ºï¼š
```
report_[timestamp].md
```

æŠ¥å‘ŠåŒ…å«ï¼š
- æœç´¢ä¸»é¢˜
- è¯¦ç»†åˆ†æ
- ç›¸å…³æ•°æ®å’Œä¿¡æ¯
- ç»“è®ºå’Œå»ºè®®

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›ç³»ç»Ÿã€‚

## ğŸ“„ è®¸å¯è¯

MIT License